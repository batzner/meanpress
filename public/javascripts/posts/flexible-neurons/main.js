const LEARNING_RATE_DATA = {
    0.330000: [0.071932029605799142, 2.078931553518915e-05, 3.2825979219586296e-07],
    0.100000: [0.014322236516792871, 0.00012013673232395108, 4.3041600624589542e-06, 6.7917723018522565e-07],
    0.010000: [0.14225202263827605, 0.0027985082168427563, 0.001703990759281297, 0.0013959654872387126, 0.0011411900031650223, 0.0009329719826497735, 0.00076287942886666272, 0.00062389702042541374, 0.00051030662846539038, 0.00041744890070668627, 0.00034152515419543438, 0.00027943679717445339, 0.00022865515349732024, 0.00018711581440824788, 0.00015313280657993844, 0.00012532879478211601, 0.00010257827712782067, 8.3961320903093531e-05, 6.8725859049564871e-05, 5.6256945986042035e-05, 4.605167581565059e-05, 3.7698711137821797e-05, 3.0861568545230021e-05, 2.5264966829860584e-05, 2.0683673407688134e-05, 1.693338943691545e-05, 1.3863299293409183e-05, 1.1349979277153272e-05, 9.2924167040481087e-06, 7.6079363410906732e-06, 6.2288684469293238e-06, 5.0998230806289319e-06, 4.1754601304709284e-06, 3.418664737628971e-06, 2.7990542947612095e-06, 2.2917566756160338e-06, 1.876410358212193e-06, 1.5363460963104701e-06, 1.2579171422366273e-06, 1.0299510305576515e-06, 9.8957715141591185e-07],
    0.001000: [0.11691102986714234, 0.07434678208903972, 0.043772988279246805, 0.027304373821806914, 0.018378489374830033, 0.013487840594905393, 0.010757692289792301, 0.0091859581843164017, 0.0082369508851920393, 0.0076242569147056032, 0.0071946919705707154, 0.0068662797088809594, 0.0065951039986557585, 0.0063575928930849138, 0.0061410502131176532, 0.0059385951198029962, 0.0057464575507593782, 0.0055625327460281319, 0.0053856086857735292, 0.005214953155945585, 0.0050500930082084195, 0.0048906961308554757, 0.0047365083081610786, 0.0045873194110375515, 0.004442945261364903, 0.0043032178717796726, 0.0041679801612563615, 0.0040370830629640961, 0.003910383911354608, 0.0037877455139746588, 0.0036690355905259569, 0.0035541264096748551, 0.0034428945331423343, 0.0033352206187954015, 0.0032309892569771042, 0.003130088826320493, 0.0030324113616912755, 0.0029378524303113607, 0.0028463110139268213, 0.0027576893958445496, 0.0026718930521724702, 0.0025888305468662861, 0.0025084134303284961, 0.0024305561413801948, 0.0023551759124661779, 0.0022821926779749971, 0.0022115289855679774, 0.0021431099104177575, 0.0020768629722622139, 0.0020127180551824321, 0.0019506073300169673, 0.0018904651793266451, 0.0018322281248271954, 0.0017758347572091938, 0.001721225668267266, 0.0016683433852629104, 0.0016171323074476974, 0.0015675386446758585, 0.0015195103580374454, 0.0014729971024457738, 0.0014279501711145256, 0.0013843224418623953, 0.0013420683251850602, 0.0013011437140361334, 0.0012615059352607274, 0.0012231137026272453, 0.0011859270714045223, 0.0011499073944335482, 0.0011150172796442312, 0.0010812205489697205, 0.0010484821986121949, 0.0010167683606153517, 0.00098604626570075933, 0.0009562842073261382, 0.00092745150692550237, 0.00089951848029199419, 0.00087245640506583111, 0.00084623748929092257, 0.00082083484100490081, 0.00079622243882846821, 0.00077237510352113682, 0.00074926847047154528, 0.00072687896309147476, 0.00070518376708381526, 0.00068416080555564515, 0.00066378871494865617, 0.00064404682175985776, 0.00062491512002660625, 0.00060637424955077991, 0.0005884054748376982, 0.00057099066472623213, 0.0005541122726874483, 0.00053775331776956844, 0.00052189736616817673, 0.0005065285134008583, 0.00049163136706657339, 0.00047719103017037875, 0.00046319308499489847, 0.00044962357750057586, 0.00043646900223729291, 0.00042371628775049203],
};

window.onContentReadyCallbacks.push(function () {
    // Take the log of each value, because chartjs can't handle log axis properly
    let data = {};
    Object.keys(LEARNING_RATE_DATA).forEach(key => {
        data[key] = LEARNING_RATE_DATA[key].map(x => Math.log10(x));
    });

    // Default chart config:
    $.extend(Chart.defaults.global.elements.line, {
        tension: 0,
        fill: false,
    });

    $.extend(Chart.defaults.global.elements.point, {
        radius: 0
    });

    // Make the x labels [1, 10, 20, 30, ...)
    let epochs = data[0.001].map((elem, index) => 10 * index);
    epochs[0] = 1;

    new Chart('learning-rate-chart', {
        type: 'line',
        data: {
            labels: epochs,
            datasets: [{
                label: 0.33,
                data: data[0.33],
                backgroundColor: '#E67A77',
                borderColor: '#E67A77'
            }, {
                label: 0.1,
                data: data[0.1],
                backgroundColor: '#a7a3d7',
                borderColor: '#a7a3d7'
            }, {
                label: 0.01,
                data: data[0.01],
                backgroundColor: '#79D1CF',
                borderColor: '#79D1CF'
            }, {
                label: 0.001,
                data: data[0.001],
                backgroundColor: '#95D7BB',
                borderColor: '#95D7BB'
            }]
        },
        options: {
            scales: {
                xAxes: [{
                    scaleLabel: {
                        display: true,
                        labelString: 'Epoch'
                    },
                    ticks: {
                        maxRotation: 0
                    }
                }],
                yAxes: [{
                    scaleLabel: {
                        display: true,
                        labelString: 'MSE'
                    },
                    ticks: {
                        // Create scientific notation labels
                        callback: function (value, index, values) {
                            return Math.pow(10, value);
                        }
                    }
                }]
            }
        }
    });
});