const BATCH_SIZE_DECAY_CHART = {"type":"line","data":{"datasets":[{"label":"1","data":[{"x":1,"y":22.904740737706476},{"x":1.1633607536154968,"y":4.733729148516935},{"x":1.3310999071248508,"y":5.904344115623014},{"x":1.4990712485073636,"y":12.293139777569525},{"x":1.6674074565476982,"y":21.356935979695074}],"borderColor":"#FFCDD2","backgroundColor":"#FFCDD2"},{"label":"10","data":[{"x":1,"y":23.601711273229043},{"x":1.3529078335789593,"y":2.8583514997790584},{"x":1.7061557646525336,"y":2.789373549380782},{"x":2.047953081876725,"y":2.7013207047905183},{"x":2.406163753449862,"y":2.752552065460471},{"x":3.1226079981666093,"y":2.7776919872392685},{"x":3.480921278789962,"y":2.8300417507669797},{"x":3.8391199724991405,"y":2.879827635578882},{"x":4.182404891304348,"y":2.9131560648211505},{"x":4.536571557971015,"y":3.0677534321819944},{"x":4.889945652173913,"y":3.253032625606013},{"x":5.234342739160358,"y":3.6708321639796426},{"x":5.592222986923606,"y":4.770581042792301},{"x":5.950447350309704,"y":6.5534965168123565},{"x":6.2961053837342495,"y":9.645544177256305},{"x":6.653608247422681,"y":18.626839472070007}],"borderColor":"#E57373","backgroundColor":"#E57373"},{"label":"20","data":[{"x":1,"y":23.59513284653845},{"x":1.6703974417542256,"y":2.760902865984198},{"x":2.3347212583853807,"y":2.6674982937372813},{"x":3,"y":2.6117166493499306},{"x":3.6907621247113163,"y":2.626088614117293},{"x":4.354756380510441,"y":2.5971233829012927},{"x":5.027289546716004,"y":2.577453908725072},{"x":5.714153561517113,"y":2.5822415288550595},{"x":6.381381381381382,"y":2.564029623074992},{"x":7.043579044969865,"y":2.551861985701525},{"x":7.7373667130273525,"y":2.583875818769021},{"x":8.392161304938831,"y":2.5590772885909225},{"x":9.046049555867228,"y":2.5523627712810333},{"x":9.754558204768584,"y":2.5723347474873495},{"x":10.436800373134329,"y":2.559409239764978},{"x":11.116640036521343,"y":2.5477009349881463},{"x":11.808262953663547,"y":2.5577475639823146},{"x":12.486587357126195,"y":2.556280873876662},{"x":13.202307259425998,"y":2.5315313599259777}],"borderColor":"#C8E6C9","backgroundColor":"#C8E6C9"},{"label":"50","data":[{"x":1,"y":23.66394064058768},{"x":2.533333333333333,"y":2.60235903143983},{"x":4.123957091775924,"y":2.5520830672980126},{"x":5.762855414398064,"y":2.5274994318886717},{"x":7.356417910447761,"y":2.5097679299837132},{"x":9,"y":2.4821705301936143},{"x":10.590203106332138,"y":2.4850187961948214},{"x":12.159337521416333,"y":2.4731179357638933},{"x":13.76597014925373,"y":2.479600045346517},{"x":15.34547662416515,"y":2.457156743290286},{"x":17,"y":2.4577235159184476},{"x":18.58399029714979,"y":2.442955219028239},{"x":20.179425837320576,"y":2.445457779654651},{"x":21.82171012734991,"y":2.4415215719625807},{"x":23.39027149321267,"y":2.4411921885460837},{"x":25,"y":2.428616203244052},{"x":26.589712918660286,"y":2.4280315597593605},{"x":28.16747572815534,"y":2.438680442625064}],"borderColor":"#66BB6A","backgroundColor":"#66BB6A"},{"label":"100","data":[{"x":1,"y":23.63115971524124},{"x":3.6313364055299537,"y":2.6018537052978736},{"x":6.207920792079208,"y":2.522850691215854},{"x":8.901112484548825,"y":2.5137420901925474},{"x":11.493029150823828,"y":2.4894403990249594},{"x":14.117647058823529,"y":2.482298450345404},{"x":16.79746835443038,"y":2.4809844821354603},{"x":19.34156378600823,"y":2.4767323932564955},{"x":22,"y":2.4671678019760064},{"x":24.6044499381953,"y":2.4827253963060385},{"x":27.189873417721518,"y":2.4554262306946613}],"borderColor":"#2E7D32","backgroundColor":"#2E7D32"},{"label":"200","data":[{"x":1,"y":23.62172294042323},{"x":4.346153846153846,"y":2.580011687795171},{"x":7.7384615384615385,"y":2.5061819834491628},{"x":11,"y":2.4936394655327976},{"x":14.209302325581396,"y":2.493525936378836},{"x":17.60668380462725,"y":2.49679846266944},{"x":20.868217054263567,"y":2.4814356562153552},{"x":24.093908629441625,"y":2.481293642040285},{"x":27.471502590673577,"y":2.4856808355912503}],"borderColor":"#123317","backgroundColor":"#123317"},{"label":"500","data":[{"x":1,"y":23.582618238514502},{"x":5.641025641025641,"y":6.006188844824464},{"x":10,"y":2.5343228919208944},{"x":14.626666666666667,"y":2.493929664383168},{"x":19,"y":2.5025753600106273},{"x":23.436241610738254,"y":2.488285316681784}],"borderColor":"#BBDEFB","backgroundColor":"#BBDEFB"},{"label":"2000","data":[{"x":1,"y":23.62810718544363},{"x":6.702702702702703,"y":10.215276943709245},{"x":12.454545454545455,"y":8.634614503835172}],"borderColor":"#2196F3","backgroundColor":"#2196F3"}]},"options":{"scales":{"xAxes":[{"type":"linear","position":"bottom","scaleLabel":{"display":true,"labelString":"Epoch"}}],"yAxes":[{"type":"logarithmic","ticks":{"min":2.4280315597593605,"max":24},"scaleLabel":{"display":true,"labelString":"Validation Perplexity"}}]}}};
const LEARNING_RATE_FIRST_CHART = {"type":"line","data":{"datasets":[{"label":"0.05","data":[{"x":0.18751645,"y":23.3467812056444},{"x":5.286280666666666,"y":8.764303282712033},{"x":10.192798799999997,"y":8.637200358093486},{"x":15.289877299999999,"y":8.624685544126626},{"x":20.29220691666666,"y":8.799311390421073}],"borderColor":"#BBDEFB","backgroundColor":"#BBDEFB"},{"label":"0.01","data":[{"x":0.19992318333333334,"y":23.563398328795717},{"x":5.298536549999999,"y":2.6900922928377766},{"x":10.363278316666667,"y":2.5887286975499615},{"x":20.369152733333333,"y":2.552794727908588},{"x":25.372502383333334,"y":2.560049428596592},{"x":30.41839483333333,"y":2.538659702253124},{"x":35.37642478333333,"y":2.538748069019333},{"x":40.423945783333316,"y":2.5291915780539185},{"x":45.3803614833333,"y":2.516153947073198},{"x":50.431366849999975,"y":2.5175249209869115},{"x":55.384447416666646,"y":2.533293451100014},{"x":60.43554894999999,"y":2.524153959718847}],"borderColor":"#64B5F6","backgroundColor":"#64B5F6"},{"label":"0.005","data":[{"x":0.20952466666666666,"y":23.55485507544244},{"x":5.306696399999999,"y":2.623162082591593},{"x":10.325070083333333,"y":2.542224412137897},{"x":15.359001683333336,"y":2.519136316105265},{"x":20.38059496666668,"y":2.524590674030691},{"x":25.317061250000002,"y":2.5210103842062015},{"x":30.33924468333334,"y":2.52903988704649},{"x":35.36919478333334,"y":2.5264947230494426},{"x":40.39264341666667,"y":2.537738597378838},{"x":45.32485008333332,"y":2.544938242946333},{"x":50.35350156666665,"y":2.540674206784287},{"x":55.376812466666664,"y":2.5476382564688476}],"borderColor":"#1565C0","backgroundColor":"#1565C0"},{"label":"0.001","data":[{"x":0.23738998333333333,"y":23.624632760374006},{"x":5.303979549999999,"y":2.993645691808323},{"x":10.238696100000002,"y":2.629450644260581},{"x":15.240521016666671,"y":2.546971405568748},{"x":20.242518933333347,"y":2.523296070836572},{"x":25.147596650000025,"y":2.522527942994584},{"x":30.24503101666669,"y":2.532666399990593},{"x":35.31790525000004,"y":2.5462823209721392},{"x":40.25004395000006,"y":2.557902883288641},{"x":45.31356150000006,"y":2.567924153155076},{"x":50.253145066666725,"y":2.57432297237258},{"x":55.32263456666671,"y":2.578490878292578},{"x":60.25699450000007,"y":2.5996282954761636}],"borderColor":"#133270","backgroundColor":"#133270"}]},"options":{"scales":{"xAxes":[{"type":"linear","position":"bottom","scaleLabel":{"display":true,"labelString":"Training Time [min]"}}],"yAxes":[{"type":"logarithmic","ticks":{"min":2,"max":24},"scaleLabel":{"display":true,"labelString":"Validation Perplexity"}}]}}};
const ALL_CHARTS = [BATCH_SIZE_DECAY_CHART, LEARNING_RATE_FIRST_CHART];
ALL_CHARTS.forEach(chartConfig => {
    chartConfig.options.scales.yAxes[0].ticks.callback = value => value.toFixed(2)
});

const BATCH_SIZE_EPOCH_MINUTES = {
    '1': 29.8,
    '10': 13.8,
    '20': 7.3,
    '50': 3.1,
    '100': 1.9,
    '200': 1.5,
    '500': 1.1,
    '2000': 0.87
};

const BATCH_SIZE_COLORS = {
    '1': '#FFCDD2',
    '10': '#E57373',
    '20': '#C8E6C9',
    '50': '#66BB6A',
    '100': '#2E7D32',
    '200': '#123317',
    '500': '#BBDEFB',
    '2000': '#2196F3'
};

new Chart('batch-size-decay-chart', BATCH_SIZE_DECAY_CHART);
plotBatchSizeEpochDuration();
new Chart('learning-rate-first-chart', LEARNING_RATE_FIRST_CHART);

function plotBatchSizeEpochDuration() {
    let labels = Object.keys(BATCH_SIZE_EPOCH_MINUTES).sort((a, b) => parseInt(a) - parseInt(b));
    let values = labels.map(l => BATCH_SIZE_EPOCH_MINUTES[l]);
    let colors = labels.map(l => BATCH_SIZE_COLORS[l]);
    new Chart('batch-size-epoch-duration-chart', {
        type: 'horizontalBar',
        data: {
            labels: labels,
            datasets: [{
                data: values,
                borderColor: colors,
                backgroundColor: colors
            }]
        },
        options: {
            scales: {
                xAxes: [{
                    scaleLabel: {
                        display: true,
                        labelString: 'Minutes per Epoch'
                    },
                    ticks: {
                        min: 0,
                        max: 30,
                        stepSize: 10
                    }
                }]
            },
            legend: {
                display: false
            }
        }
    });
}